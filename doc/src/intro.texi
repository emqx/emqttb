@node Introduction
@chapter Introduction

@node Topic Patterns
@section Topic Patterns

@code{emqttb} supports pattern substitution in the topic names.

@table @samp
  @item %n
  replaced with the worker ID (integer)
  @item %g
  replaced with the group ID
  @item %h
  replaced with the hostname
@end table


@node Verify Message Sequence
@section Message Sequence Verification

@code{emqttb} has builtin tools for detecting message loss and repetition.

@quotation Warning
Publishers should insert metadata into the payloads in order for this feature to work.
@end quotation

@quotation Warning
This feature can use a lot of RAM to store the sequence numbers for each triple of sender client id, receiver client id, and MQTT topic.
@end quotation

Errors about missing messages and warnings about duplicate messages are printed to the emqttb log.

@heading Prometheus metrics

@table @code
@item emqttb_repeats_number
number of times when the sequence number of the message goes backwards
@item emqttb_gaps_number
number of times when the sequence number of the message skips the messages (a gap)
@item emqttb_repeat_size
rolling average; size of the repeated sequence
@item emqttb_gap_size
rolling average; size of the gap
@end table
